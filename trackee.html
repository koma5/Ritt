<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>still to be named - trackee</title>
    <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
    <script src="./NoSleep.min.js"></script>

</head>
<body>
    <button onclick="activateTracking()">start tracking</button>
    <button onclick="dontSleep()" id="sleep">no sleep</button>
	<script>
    var client = mqtt.connect('wss://iot.eclipse.org:443/ws')


    function activateTracking() {
        var watchID = navigator.geolocation.watchPosition(function(position) { gotPosition(position); }, error);
    }

    function error(error) {
        console.log(error.code + ' ' + error.message);
    };


    function gotPosition(position) {
        client.publish("track/latlong", position.coords.latitude + ','  + position.coords.longitude)
            console.log(position);
    }

    var noSleep = new NoSleep();

    function dontSleep() {
        noSleep.enable();
        document.getElementById('sleep').class = 'active';
    }


    </script>
    </body>
</html>
